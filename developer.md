# データの取り扱いについて

ゲームの進行中の状態はReduxで管理し、ゲーム終了時に重要なデータ（スコアや履歴）をSupabaseに保存するのが基本的な設計方針です。  
具体的には状態が頻繁に変更されるデータや、瞬間的なUIの状態はReduxなどで管理し、セッションをまたいでアクセスが必要なデータやユーザーごとの履歴やランキングはSupabaseで管理を行います。

## Reduxで管理する情報

### ゲームの進行状況


1. 現在出題中の問題や、現在の問題番号。
1. 各問題に対するユーザーの回答（「買い」「売り」「様子を見る」の選択）。
1. 各ゲーム内でのレバレッジの選択。
1. ユーザーが回答したかどうかのフラグ（全問回答済みかどうかの確認のため）。
1. スコア計算の途中データ（各問題ごとの収支の合計など）。


## Supabaseで管理する情報

### ユーザーのアカウントデータ
1. ユーザーID、ユーザー名、ユーザーアイコンなどの基本的なユーザー情報。
1. プレイ日時やゲーム回数のログ。

## ユーザーごとのスコアや結果

1. 各ゲームごとの最終スコア（収支の合計）。ランキングや履歴で参照可能にするため。


## ランキングに関するデータ

1. ユーザーごとの「最高スコア」や「平均スコア」。
